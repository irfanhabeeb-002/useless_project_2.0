<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimeWaster - Weaponized Procrastination</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0f0f0f;
      font-family: 'Inter', sans-serif;
      color: #ffffff;
      overflow-x: hidden;
      cursor: none;
      position: relative;
    }

    .custom-cursor {
      position: fixed;
      width: 20px;
      height: 20px;
      background: linear-gradient(45deg, #00ffff, #ff00ff);
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      mix-blend-mode: difference;
      transition: transform 0.1s ease;
    }

    .cursor-trail {
      position: fixed;
      width: 8px;
      height: 8px;
      background: #00ffff;
      border-radius: 50%;
      pointer-events: none;
      z-index: 9998;
      opacity: 0.6;
    }

    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      position: relative;
    }

    .background-gradient {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #0f0f0f 100%);
      z-index: -2;
    }

    .floating-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .floating-element {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #00ffff;
      border-radius: 50%;
      animation: float 6s infinite linear;
      opacity: 0.3;
    }

    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 0.3; }
      90% { opacity: 0.3; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    .main-content {
      text-align: center;
      max-width: 600px;
      z-index: 1;
    }

    .hero-title {
      font-size: clamp(2.5rem, 8vw, 4rem);
      font-weight: 900;
      background: linear-gradient(45deg, #00ffff, #ff00ff, #00ff00);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease-in-out infinite;
      margin-bottom: 1rem;
      text-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .subtitle {
      font-size: 1.2rem;
      color: #888;
      margin-bottom: 2rem;
      font-weight: 400;
    }

    .hook-text {
      font-size: 1.5rem;
      font-weight: 600;
      color: #ff00ff;
      margin-bottom: 3rem;
      text-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .input-container {
      margin-bottom: 2rem;
      position: relative;
    }

    .time-input {
      width: 100%;
      max-width: 400px;
      padding: 1.5rem;
      font-size: 1.2rem;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid #00ffff;
      border-radius: 15px;
      color: #ffffff;
      text-align: center;
      outline: none;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .time-input:focus {
      border-color: #ff00ff;
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.3);
      transform: scale(1.02);
    }

    .time-input::placeholder {
      color: #666;
    }

    .cta-button {
      width: 100%;
      max-width: 400px;
      padding: 1.5rem 2rem;
      font-size: 1.5rem;
      font-weight: 800;
      background: linear-gradient(45deg, #ff00ff, #00ffff);
      border: none;
      border-radius: 15px;
      color: #000;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 10px 30px rgba(255, 0, 255, 0.3);
    }

    .cta-button:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 15px 40px rgba(255, 0, 255, 0.5);
      animation: buttonShake 0.5s ease-in-out;
    }

    .cta-button:active {
      transform: translateY(0) scale(0.98);
    }

    @keyframes buttonShake {
      0%, 100% { transform: translateY(-3px) scale(1.05) rotate(0deg); }
      25% { transform: translateY(-3px) scale(1.05) rotate(-1deg); }
      75% { transform: translateY(-3px) scale(1.05) rotate(1deg); }
    }

    .cta-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .cta-button:hover::before {
      left: 100%;
    }

    .trap-copy {
      font-size: 0.8rem;
      color: #666;
      margin-top: 1rem;
      font-style: italic;
    }

    .loading-container {
      display: none;
      margin-top: 2rem;
      text-align: center;
    }

    .loading-text {
      font-size: 1.3rem;
      color: #00ffff;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .progress-bar {
      width: 100%;
      max-width: 400px;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin: 0 auto;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00ffff, #ff00ff);
      width: 0%;
      transition: width 0.3s ease;
      border-radius: 4px;
    }

    .video-container {
      display: none;
      margin-top: 2rem;
      width: 100%;
      max-width: 600px;
    }

    .video-frame {
      width: 100%;
      height: 315px;
      border: 3px solid #00ffff;
      border-radius: 15px;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
    }

    .fallback-container {
      display: none;
      margin-top: 2rem;
      text-align: center;
      padding: 2rem;
      background: rgba(255, 0, 255, 0.1);
      border-radius: 15px;
      border: 2px solid #ff00ff;
    }

    .roast-text {
      font-size: 1.2rem;
      color: #ff00ff;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .productivity-link {
      color: #00ffff;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .productivity-link:hover {
      color: #ff00ff;
      text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
    }

    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a1a;
      border: 2px solid #ff00ff;
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      z-index: 1000;
      display: none;
      box-shadow: 0 0 50px rgba(255, 0, 255, 0.5);
      backdrop-filter: blur(10px);
    }

    .popup-title {
      font-size: 1.5rem;
      color: #ff00ff;
      margin-bottom: 1rem;
      font-weight: 800;
    }

    .popup-button {
      background: linear-gradient(45deg, #ff00ff, #00ffff);
      border: none;
      padding: 1rem 2rem;
      border-radius: 10px;
      color: #000;
      font-weight: 600;
      cursor: pointer;
      margin: 0.5rem;
      transition: all 0.3s ease;
    }

    .popup-button:hover {
      transform: scale(1.05);
    }

    .idle-notification {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: linear-gradient(45deg, #ff00ff, #00ffff);
      color: #000;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      z-index: 1000;
      display: none;
      animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #00ffff;
      animation: confettiFall 3s linear forwards;
      z-index: 1001;
    }

    @keyframes confettiFall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      
      .hero-title {
        font-size: 2.5rem;
      }
      
      .cta-button {
        padding: 1.2rem 1.5rem;
        font-size: 1.2rem;
      }
      
      .time-input {
        padding: 1.2rem;
        font-size: 1rem;
      }
    }

    .secret-mode {
      position: fixed;
      top: 1rem;
      right: 1rem;
      font-size: 0.7rem;
      color: #333;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .secret-mode:hover {
      color: #00ffff;
    }
  </style>
</head>
<body>
  <div class="custom-cursor"></div>
  <div class="background-gradient"></div>
  <div class="floating-elements"></div>
  
  <div class="secret-mode" onclick="activateSecretMode()">PRODUCTIVITY MODE</div>

  <div class="container">
    <div class="main-content">
      <h1 class="hero-title">TimeWaster</h1>
      <p class="subtitle">Weaponized Procrastination Engine</p>
      
      <div class="hook-text" id="hookText">
        You've got 10 minutes. But zero self-control. Let us help.
      </div>

      <div class="input-container">
        <input type="text" class="time-input" id="timeInput" placeholder="How long do you want to waste? (e.g., 5 minutes, 1 hour)" />
      </div>

      <button class="cta-button" id="wasteButton" onclick="wasteTime()">
        WASTE MY TIME
      </button>
      
      <p class="trap-copy">No refunds on wasted time. Terms and conditions apply to your soul.</p>

      <div class="loading-container" id="loadingContainer">
        <div class="loading-text" id="loadingText">Finding your perfect waste...</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <div class="video-container" id="videoContainer">
        <iframe class="video-frame" id="videoFrame" src="" frameborder="0" allowfullscreen></iframe>
      </div>

      <div class="fallback-container" id="fallbackContainer">
        <div class="roast-text">What are you doing with your life?</div>
        <p>Sometimes the universe can't even help you waste time properly.</p>
        <p>Maybe it's a sign. <a href="https://www.quizony.com/what-is-your-purpose-in-life/index.html" target="_blank" class="productivity-link">Find your purpose â†’</a></p>
      </div>
    </div>
  </div>

  <div class="popup" id="popup">
    <div class="popup-title" id="popupTitle">No. Stay. Waste time properly.</div>
    <button class="popup-button" onclick="closePopup()">Fine, I'll stay</button>
    <button class="popup-button" onclick="closePopup()">Actually, I'll leave</button>
  </div>

  <div class="idle-notification" id="idleNotification">
    Are you *still* trying to be productive? ðŸ˜©
  </div>

  <script>
    const API_KEY = 'AIzaSyCyBBuBNDHYuw5wlDWsDahaV4mm5QcU92Y';
    let idleTimer;
    let cursorTrails = [];
    let isSecretMode = false;

    // Custom cursor
    document.addEventListener('mousemove', (e) => {
      const cursor = document.querySelector('.custom-cursor');
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
      
      // Create cursor trail
      if (Math.random() > 0.7) {
        createCursorTrail(e.clientX, e.clientY);
      }
    });

    function createCursorTrail(x, y) {
      const trail = document.createElement('div');
      trail.className = 'cursor-trail';
      trail.style.left = x + 'px';
      trail.style.top = y + 'px';
      document.body.appendChild(trail);
      
      setTimeout(() => {
        trail.remove();
      }, 1000);
    }

    // Floating elements
    function createFloatingElements() {
      const container = document.querySelector('.floating-elements');
      for (let i = 0; i < 20; i++) {
        const element = document.createElement('div');
        element.className = 'floating-element';
        element.style.left = Math.random() * 100 + '%';
        element.style.animationDelay = Math.random() * 6 + 's';
        element.style.animationDuration = (Math.random() * 3 + 4) + 's';
        container.appendChild(element);
      }
    }

    // Hook text rotation
    const hookTexts = [
      "You've got 10 minutes. But zero self-control. Let us help.",
      "Tired. Distracted. Desperate for delay. Press this.",
      "Your productivity is a lie. Embrace the waste.",
      "The universe wants you to procrastinate. Don't fight it.",
      "You're not lazy. You're just ahead of the curve."
    ];

    function rotateHookText() {
      const hookText = document.getElementById('hookText');
      const randomText = hookTexts[Math.floor(Math.random() * hookTexts.length)];
      hookText.style.opacity = '0';
      
      setTimeout(() => {
        hookText.textContent = randomText;
        hookText.style.opacity = '1';
      }, 300);
    }

    // Idle detection
    function resetIdleTimer() {
      clearTimeout(idleTimer);
      idleTimer = setTimeout(() => {
        showIdleNotification();
      }, 30000); // 30 seconds
    }

    function showIdleNotification() {
      const notification = document.getElementById('idleNotification');
      notification.style.display = 'block';
      
      setTimeout(() => {
        notification.style.display = 'none';
      }, 5000);
    }

    // Scroll away detection
    let lastScrollY = window.scrollY;
    window.addEventListener('scroll', () => {
      if (Math.abs(window.scrollY - lastScrollY) > 100) {
        showPopup("No. Stay. Waste time properly.");
      }
      lastScrollY = window.scrollY;
    });

    function showPopup(message) {
      const popup = document.getElementById('popup');
      const popupTitle = document.getElementById('popupTitle');
      popupTitle.textContent = message;
      popup.style.display = 'block';
    }

    function closePopup() {
      document.getElementById('popup').style.display = 'none';
    }

    // Secret mode
    function activateSecretMode() {
      if (!isSecretMode) {
        isSecretMode = true;
        document.querySelector('.secret-mode').textContent = 'ACTIVATED';
        document.querySelector('.secret-mode').style.color = '#00ffff';
        setTimeout(() => {
          window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
        }, 1000);
      }
    }

    // Time parsing
    function parseTimeInput(input) {
      const regex = /(\d+)\s*(second|sec|minute|min|hour|hr)s?/i;
      const match = input.match(regex);
      if (!match) return null;
      
      const value = parseInt(match[1], 10);
      const unit = match[2].toLowerCase();
      
      if (unit.startsWith("second")) return value;
      if (unit.startsWith("minute") || unit.startsWith("min")) return value * 60;
      if (unit.startsWith("hour") || unit.startsWith("hr")) return value * 3600;
      
      return null;
    }

    // Video fetching with psychological manipulation
    async function fetchVideo(seconds) {
      const durationType = seconds <= 240 ? "short" : seconds <= 1200 ? "medium" : "long";
      
      // Sometimes return a completely wrong duration for pattern interrupt
      if (Math.random() > 0.8) {
        seconds = Math.random() > 0.5 ? 1800 : 300; // 30 min or 5 min
      }
      
      const searchURL = `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&part=snippet&type=video&maxResults=25&videoDuration=${durationType}&videoEmbeddable=true&q=random`;
      
      const res = await fetch(searchURL);
      const data = await res.json();
      
      if (!data.items || data.items.length === 0) {
        throw new Error("No videos found");
      }
      
      const videoIds = data.items.map(item => item.id.videoId).join(',');
      const detailsURL = `https://www.googleapis.com/youtube/v3/videos?key=${API_KEY}&part=contentDetails,snippet&id=${videoIds}`;
      const detailsRes = await fetch(detailsURL);
      const detailsData = await detailsRes.json();
      
      const candidates = detailsData.items
        .map(item => {
          const duration = parseISO8601Duration(item.contentDetails.duration);
          return {
            id: item.id,
            duration,
            title: item.snippet.title,
            diff: Math.abs(duration - seconds)
          };
        })
        .filter(v => v.duration >= seconds * 0.8 && v.duration <= seconds * 1.2 && v.duration <= 7200);
      
      if (candidates.length === 0) {
        throw new Error("No valid matches");
      }
      
      const randomIndex = Math.floor(Math.random() * candidates.length);
      return candidates[randomIndex];
    }

    function parseISO8601Duration(iso) {
      const regex = /PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/;
      const [, h, m, s] = (iso.match(regex) || []).map(x => parseInt(x || 0));
      return (h || 0) * 3600 + (m || 0) * 60 + (s || 0);
    }

    // Main waste time function
    async function wasteTime() {
      const input = document.getElementById('timeInput').value.trim();
      const seconds = parseTimeInput(input);
      
      if (!seconds) {
        showPopup("Please enter a valid time like '5 minutes' or '1 hour'.");
        return;
      }

      // Haptic feedback on mobile
      if ('vibrate' in navigator) {
        navigator.vibrate(100);
      }

      // Show loading with fake progress
      const loadingContainer = document.getElementById('loadingContainer');
      const loadingText = document.getElementById('loadingText');
      const progressFill = document.getElementById('progressFill');
      const videoContainer = document.getElementById('videoContainer');
      const fallbackContainer = document.getElementById('fallbackContainer');
      
      loadingContainer.style.display = 'block';
      videoContainer.style.display = 'none';
      fallbackContainer.style.display = 'none';
      
      // Fake progress animation
      let progress = 0;
      const progressInterval = setInterval(() => {
        progress += Math.random() * 15;
        if (progress > 87) progress = 87; // Never reach 100% for Zeigarnik effect
        progressFill.style.width = progress + '%';
        loadingText.textContent = `Finding your perfect waste... ${Math.floor(progress)}% done`;
      }, 200);

      try {
        // Artificial delay for anticipation
        await new Promise(resolve => setTimeout(resolve, 3000));
        
        const video = await fetchVideo(seconds);
        
        clearInterval(progressInterval);
        progressFill.style.width = '100%';
        loadingText.textContent = 'Perfect match found!';
        
        setTimeout(() => {
          loadingContainer.style.display = 'none';
          const videoFrame = document.getElementById('videoFrame');
          videoFrame.src = `https://www.youtube.com/embed/${video.id}?autoplay=1&controls=0&modestbranding=1`;
          videoContainer.style.display = 'block';
          
          // Confetti effect
          createConfetti();
          
          // Track video completion
          setTimeout(() => {
            if ('vibrate' in navigator) {
              navigator.vibrate([100, 50, 100]);
            }
          }, 5000);
        }, 1000);
        
      } catch (err) {
        clearInterval(progressInterval);
        loadingContainer.style.display = 'none';
        fallbackContainer.style.display = 'block';
      }
    }

    function createConfetti() {
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = ['#00ffff', '#ff00ff', '#00ff00', '#ffff00'][Math.floor(Math.random() * 4)];
        confetti.style.animationDelay = Math.random() * 2 + 's';
        document.body.appendChild(confetti);
        
        setTimeout(() => {
          confetti.remove();
        }, 3000);
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      createFloatingElements();
      setInterval(rotateHookText, 8000);
      resetIdleTimer();
      
      // Event listeners for idle detection
      ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
        document.addEventListener(event, resetIdleTimer);
      });
      
      // Enter key support
      document.getElementById('timeInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          wasteTime();
        }
      });
    });
  </script>
</body>
</html>
